#!/bin/bash
# Author: PietroVN
# Deps: mpv, youtube-dl(or any fork), search (included), curl, sed

# Include search
. /usr/local/bin/search

# Command
command=$@
echo ${command}

_search() {
	# Detect mode
	case ${command} in
		*"youtube:"*)
				# Leave only the title on command
				command=$(sed 's/search//g' <<< ${command})
				command=$(sed 's/youtube://g' <<< ${command})

				# Search
				search _youtube:${command}

				# 
				echo "Select video:"
				read video_number
				video=$(cat ${tmp_videos} | sed -n ${video_number}p)

				# Play
				mpv ${youtube}${video}
		;;
		*"anime:"*)

				# Leave only the title on command
				command=$(sed 's/search//g' <<< ${command})
				command=$(sed 's/anime://g' <<< ${command})
				echo ${command}
				# Search
				search _anime:${command}

				# 
				echo "Select video:"
				read video_number
				video=$(cat ${tmp_videos} | sed -n ${video_number}p)

				# Play
				mpv ${video}

		;;
		*"url:"*)
			
		;;
	esac
}

# Check if command is empty
[[ -z ${command} ]] && echo "Empty command"

case ${command} in
	*"search"*)
		_search
	;;
esac
