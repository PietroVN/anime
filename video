#!/bin/bash
# Author: PietroVN
# Deps: mpv, youtube-dl(or any fork), search (included), curl, sed

# Include search
. /usr/local/bin/search

# Command
command=$@

play() {
	# Detect mode
	case ${command} in
		*"search:"*)
				# Leave only the title on command
				command=$(sed 's/search://g' <<< ${command})
				command=$(sed 's/play//g' <<< ${command})

				# Search
				search YOUTUBE:${command}

				# 
				echo "Select video:"
				read video_number
				video=$(cat ${TMP_VIDEOS} | sed -n ${video_number}p)

				# Play
				mpv ${YOUTUBE}${video}
		;;
		*"url:"*)
			
		;;
	esac
}

# Check if command is empty
[[ -z ${command} ]] && echo "Empty command"

# 
case ${command} in
	*"play"*)
		play
	;;
esac
